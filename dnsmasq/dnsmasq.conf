# dnsmasq.conf
# https://github.com/poseidon/matchbox/tree/3b753075657081a0f7faba8e1c1d515f145e2f17/contrib/dnsmasq
# https://www.incognito.com/tutorials/dhcp-options-in-plain-english/
# https://netbeez.net/blog/set-up-tftp-client-server/

no-daemon
dhcp-range=10.0.0.180,10.0.0.255
dhcp-option=3,10.0.0.1
dhcp-option=66,10.0.0.60

enable-tftp
tftp-root=/var/lib/tftpboot

log-queries
log-dhcp

# Legacy PXE
dhcp-match=set:bios,option:client-arch,0
dhcp-boot=tag:bios,undionly.kpxe

# UEFI
dhcp-match=set:efi32,option:client-arch,6
dhcp-boot=tag:efi32,ipxe.efi

dhcp-match=set:efibc,option:client-arch,7
dhcp-boot=tag:efibc,ipxe.efi

dhcp-match=set:efi64,option:client-arch,9
dhcp-boot=tag:efi64,ipxe.efi

dhcp-match=set:pi,option:client-arch,11
dhcp-boot=tag:pi,efi/boot/bootaa64.efi

# iPXE
dhcp-userclass=set:ipxe,iPXE
dhcp-boot=tag:ipxe,http://foremanlite.yaghl:8080/ipxe/boot.ipxe
